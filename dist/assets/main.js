!function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./",i(i.s=3)}([function(e,t,i){var s=i(1),r=i(2);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var n={insert:"head",singleton:!1},o=(s(r,n),r.locals?r.locals:{});e.exports=o},function(e,t,i){"use strict";var s,r=function(){return void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s},n=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),o=[];function a(e){for(var t=-1,i=0;i<o.length;i++)if(o[i].identifier===e){t=i;break}return t}function h(e,t){for(var i={},s=[],r=0;r<e.length;r++){var n=e[r],h=t.base?n[0]+t.base:n[0],d=i[h]||0,l="".concat(h," ").concat(d);i[h]=d+1;var c=a(l),u={css:n[1],media:n[2],sourceMap:n[3]};-1!==c?(o[c].references++,o[c].updater(u)):o.push({identifier:l,updater:v(u,t),references:1}),s.push(l)}return s}function d(e){var t=document.createElement("style"),s=e.attributes||{};if(void 0===s.nonce){var r=i.nc;r&&(s.nonce=r)}if(Object.keys(s).forEach((function(e){t.setAttribute(e,s[e])})),"function"==typeof e.insert)e.insert(t);else{var o=n(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var l,c=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function u(e,t,i,s){var r=i?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(e.styleSheet)e.styleSheet.cssText=c(t,r);else{var n=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(n,o[t]):e.appendChild(n)}}function p(e,t,i){var s=i.css,r=i.media,n=i.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),n&&btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}var m=null,f=0;function v(e,t){var i,s,r;if(t.singleton){var n=f++;i=m||(m=d(t)),s=u.bind(null,i,n,!1),r=u.bind(null,i,n,!0)}else i=d(t),s=p.bind(null,i,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return s(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;s(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var i=h(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<i.length;s++){var r=a(i[s]);o[r].references--}for(var n=h(e,t),d=0;d<i.length;d++){var l=a(i[d]);0===o[l].references&&(o[l].updater(),o.splice(l,1))}i=n}}}},function(e,t,i){},function(e,t,i){"use strict";i.r(t);var s=class{constructor(e=10){this.x=50,this.y=50,this.size=e}};var r=class extends s{constructor(e){super(e),this.oldX=null,this.oldY=null,this.vX=0,this.vY=0}move(){this.oldX=this.x,this.oldY=this.y,this.x+=this.vX,this.y+=this.vY}};var n=class extends s{constructor(e){super(e),this.cost=1}update(e,t,i){this.x=e,this.y=t,this.cost=i}};const o=(e,t)=>Math.floor(Math.random()*(t-e+1)+e);class a{constructor(){this.events={}}on(e,t){(this.events[e]||(this.events[e]=[])).push(t)}emit(e){this.events[e]&&this.events[e].forEach(e=>e())}}var h=class extends a{constructor(e,t){super(),this.speed=7,this.costRange={min:1,max:3},this.width=e,this.height=t,this.score=0,this.player=new r,this.target=new n,this.timer={timeLeft:60,isFinished:!0}}start(){this.updateTarget(),this.timer.isFinished=!1,this.timer.timeLeft=60,this.score=0,this.timerID=setInterval(this.tick.bind(this),1e3)}update(){this.timer.isFinished||(this.movePlayer(),this.targetCollision()&&(this.updateTarget(),this.score+=this.target.cost,this.emit("updateScore")))}updateTarget(){const e=o(this.target.size,this.width-this.target.size),t=o(this.target.size,this.height-this.target.size),i=o(this.costRange.min,this.costRange.max);this.target.update(e,t,i)}movePlayer(){this.player.move(),this.resolveBorderCollision()}setSpeed(e,t){this.player["v"+t]=this.speed*e}dropSpeed(e){this.player["v"+e]=0}resolveBorderCollision(){this.player.x<=this.player.size&&(this.player.x=this.player.size),this.player.x>=this.width-this.player.size&&(this.player.x=this.width-this.player.size),this.player.y<=this.player.size&&(this.player.y=this.player.size),this.player.y>=this.height-this.player.size&&(this.player.y=this.height-this.player.size)}targetCollision(){const e=Math.abs(this.player.x-this.target.x),t=Math.abs(this.player.y-this.target.y);return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))<this.target.size+this.player.size}finish(){clearInterval(this.timerID),this.timer.isFinished=!0,this.dropSpeed("X"),this.dropSpeed("Y")}tick(){this.timer.timeLeft--?this.emit("updateTime"):this.emit("finish")}getTime(){return this.timer.timeLeft}getScore(){return this.score}};var d=class extends a{constructor(e,t,i){super(),this.c=e.getContext("2d"),this.renderId=null,this.scoreNode=t,this.timeNode=i,this.move=this.movePlayer.bind(this),this.stop=this.stopPlayer.bind(this)}finish(){cancelAnimationFrame(this.renderId),window.onkeydown=null,window.onkeyup=null,this.alertScore()}alertScore(e){confirm(`Congratulations.\nYour Score ${e}\nWant play one more time?`)&&this.emit("start")}start(){this.renderId=requestAnimationFrame(this.emit.bind(this,"update")),window.onkeydown=this.move,window.onkeyup=this.stop}renderFrame({p:e,t:t}){this.c.clearRect(0,0,400,400),this.renderPlayer(e),this.renderTarget(t),this.renderId=requestAnimationFrame(this.emit.bind(this,"update"))}renderPlayer(e){this.drawCircle(e.x,e.y,e.size,"black")}renderTarget(e){this.drawCircle(e.x,e.y,e.size,"red",e.cost)}drawCircle(e,t,i,s,r){this.c.fillStyle=s,this.c.beginPath(),this.c.arc(e,t,i,0,360),this.c.stroke(),this.c.fill(),this.c.fillStyle="white",r&&this.c.fillText(r,e-4,t+4),this.c.closePath()}movePlayer(e){e.preventDefault(),this.emit(e.code+"Pressed")}stopPlayer(e){e.preventDefault(),this.emit(e.code+"Unpressed")}updateScore(e){this.scoreNode.textContent=e}updateTime(e){this.timeNode.textContent=e}};var l=class{constructor(e,t){this.model=e,this.view=t,t.on("move",()=>this.model.movePlayer()),t.on("start",this.start.bind(this)),t.on("update",this.update.bind(this)),e.on("finish",this.finish.bind(this)),e.on("updateTime",this.updateTime.bind(this)),e.on("updateScore",this.updateScore.bind(this)),t.on("ArrowUpPressed",()=>{this.model.setSpeed(-1,"Y")}),t.on("ArrowUpUnpressed",()=>{this.model.dropSpeed("Y")}),t.on("ArrowDownPressed",()=>{this.model.setSpeed(1,"Y")}),t.on("ArrowDownUnpressed",()=>{this.model.dropSpeed("Y")}),t.on("ArrowLeftPressed",()=>{this.model.setSpeed(-1,"X")}),t.on("ArrowLeftUnpressed",()=>{this.model.dropSpeed("X")}),t.on("ArrowRightPressed",()=>{this.model.setSpeed(1,"X")}),t.on("ArrowRightUnpressed",()=>{this.model.dropSpeed("X")}),this.start()}update(){this.view.renderFrame({p:this.model.player,t:this.model.target}),this.model.update()}start(){this.model.start(),this.updateTime(),this.updateScore(),this.view.start()}finish(){this.model.finish(),this.view.finish()}updateTime(){this.view.updateTime(this.model.getTime())}updateScore(){this.view.updateScore(this.model.getScore())}};const c=document.getElementById("game-canvas"),u=document.querySelector(".score-value"),p=document.querySelector(".time-value");c.width=400,c.height=400;new l(new h(c.width,c.height),new d(c,u,p));i(0)}]);